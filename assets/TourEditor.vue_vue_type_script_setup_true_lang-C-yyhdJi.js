import{_ as V,o as a,c as l,a as e,b as v,k as L,d as A,s as T,l as c,v as u,u as p,e as F,f as b,A as q,F as y,r as x,B as C,m as I,t as M}from"./index-fTsRwZ5w.js";import{u as U}from"./drivers-BEQAypAq.js";import{c as $}from"./IconChevronLeft-CZ4Vq3ZT.js";const N={},Z={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentcolor","stroke-width":"2",viewBox:"0 0 24 24"},E=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"},null,-1),z=[E];function j(r,n){return a(),l("svg",Z,z)}const H=V(N,[["render",j]]);function O(...r){return function(n){return r.map(s=>s(n)).every(s=>s)}}function P(r,n){return{filteredArray:v(()=>r.value.filter(O(...n)))}}function R(r){const n=L({location:""}),s=[d=>n.value.location.length===0||d.location===n.value.location],{filteredArray:m}=P(r,s);function _(d){n.value.location=d}return{filteredDrivers:m,filterDriversByLocation:_}}function Y(r){return r.toISOString().split("T").shift()}const G={class:"form-control"},J=e("label",{class:"form-control__label",for:"customer"},"Customer name",-1),K={class:"form-control"},Q=e("label",{class:"form-control__label",for:"date"},"Shipment date",-1),W=["min"],X={class:"form-control"},ee=e("label",{class:"form-control__label",for:"origin-location"},"Location from",-1),te={key:0,id:"origin-location-note",class:"form-control__note text-with-icon"},oe={id:"origin-locations"},ie=["value"],re={class:"form-control"},ne=e("label",{class:"form-control__label",for:"destination-location"},"Location to",-1),se={class:"form-control"},ae=e("label",{class:"form-control__label",for:"driver"},"Driver",-1),le=["disabled"],de=e("option",{value:"",selected:""},"Select a driver",-1),ce=["value"],ue=e("div",{id:"driver-note",class:"form-control__note"}," You can only assign drivers registered at the same departure location ",-1),ve=["disabled"],me={key:0},_e={key:1},be=A({__name:"TourEditor",props:{tour:{}},emits:["save"],setup(r,{emit:n}){const s=r,m=n,{drivers:_,driverLocations:d}=T(U()),{filteredDrivers:h,filterDriversByLocation:g}=R(_),o=L({id:$(),customer:"",date:"",originLocation:"",destinationLocation:"",driver:"",...s.tour}),D=v(()=>o.value.originLocation.length>0),f=v(()=>o.value.originLocation.length===0||h.value.length===0),k=v(()=>!!s.tour),w=Y(new Date);function S(){B(),g(o.value.originLocation)}function B(){o.value.driver=""}return g(o.value.originLocation),(fe,i)=>(a(),l("form",{class:"form",onSubmit:i[5]||(i[5]=I(t=>m("save",o.value),["prevent"]))},[e("div",G,[J,c(e("input",{id:"customer","onUpdate:modelValue":i[0]||(i[0]=t=>o.value.customer=t),class:"text-field",type:"text",required:""},null,512),[[u,o.value.customer,void 0,{trim:!0}]])]),e("div",K,[Q,c(e("input",{id:"date","onUpdate:modelValue":i[1]||(i[1]=t=>o.value.date=t),class:"text-field",type:"date",min:p(w),required:""},null,8,W),[[u,o.value.date,void 0,{trim:!0}]])]),e("div",X,[ee,c(e("input",{id:"origin-location","onUpdate:modelValue":i[2]||(i[2]=t=>o.value.originLocation=t),class:"text-field",type:"text",list:"origin-locations",placeholder:"e.g., Berlin",pattern:"[A-Za-z\\s]+","aria-describedby":"origin-location-note",required:"",onInput:S},null,544),[[u,o.value.originLocation,void 0,{trim:!0}]]),D.value&&f.value?(a(),l("div",te,[F(H),b(" There are no drivers in this location ")])):q("",!0),e("datalist",oe,[(a(!0),l(y,null,x(p(d),t=>(a(),l("option",{key:t,value:t},null,8,ie))),128))])]),e("div",re,[ne,c(e("input",{id:"destination-location","onUpdate:modelValue":i[3]||(i[3]=t=>o.value.destinationLocation=t),class:"text-field",type:"text",placeholder:"e.g., Stuttgart",pattern:"[A-Za-z\\s]+",required:""},null,512),[[u,o.value.destinationLocation,void 0,{trim:!0}]])]),e("div",se,[ae,c(e("select",{id:"driver","onUpdate:modelValue":i[4]||(i[4]=t=>o.value.driver=t),class:"select","aria-describedby":"driver-note",disabled:f.value,required:""},[de,(a(!0),l(y,null,x(p(h),t=>(a(),l("option",{key:t.id,value:t.name},M(t.name),9,ce))),128))],8,le),[[C,o.value.driver]]),ue]),e("button",{class:"form__submit-button button button--primary",disabled:f.value},[k.value?(a(),l("span",me,"Save")):(a(),l("span",_e,"Create")),b(" Tour ")],8,ve)],32))}});export{be as _};
